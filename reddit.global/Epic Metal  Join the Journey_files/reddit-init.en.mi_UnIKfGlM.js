try{var JSON;JSON||(JSON={});(function(){function a(a){return a<10?"0"+a:a}function b(a){i.lastIndex=0;return i.test(a)?'"'+a.replace(i,function(a){var b=k[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,e){var k,i,n,s,x=j,t,o=e[a];o&&typeof o==="object"&&typeof o.toJSON==="function"&&(o=o.toJSON(a));typeof l==="function"&&(o=l.call(e,a,o));switch(typeof o){case "string":return b(o);case "number":return isFinite(o)?String(o):"null";
case "boolean":case "null":return String(o);case "object":if(!o)return"null";j+=g;t=[];if(Object.prototype.toString.apply(o)==="[object Array]"){s=o.length;for(k=0;k<s;k+=1)t[k]=c(k,o)||"null";n=t.length===0?"[]":j?"[\n"+j+t.join(",\n"+j)+"\n"+x+"]":"["+t.join(",")+"]";j=x;return n}if(l&&typeof l==="object"){s=l.length;for(k=0;k<s;k+=1)typeof l[k]==="string"&&(i=l[k],(n=c(i,o))&&t.push(b(i)+(j?": ":":")+n))}else for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=c(i,o))&&t.push(b(i)+(j?": ":
":")+n);n=t.length===0?"{}":j?"{\n"+j+t.join(",\n"+j)+"\n"+x+"}":"{"+t.join(",")+"}";j=x;return n}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,g,k={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,e){var k;g=j="";if(typeof e==="number")for(k=0;k<e;k+=1)g+=" ";else typeof e==="string"&&(g=e);if((l=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,b){function c(a,g){var e,k,i=a[g];if(i&&typeof i==="object")for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(k=c(i,e),k!==void 0?i[e]=k:delete i[e]);return b.call(a,g,i)}var g,a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+a+")"),typeof b==="function"?c({"":g},""):g;throw new SyntaxError("JSON.parse");}})();(function(){var a=this,b=a._,c={},e=Array.prototype,i=Object.prototype,j=e.push,g=e.slice,k=e.concat,l=i.toString,w=i.hasOwnProperty,u=e.forEach,v=e.map,p=e.reduce,n=e.reduceRight,s=e.filter,x=e.every,t=e.some,o=e.indexOf,D=e.lastIndexOf,i=Array.isArray,H=Object.keys,z=Function.prototype.bind,h=function(a){if(a instanceof h)return a;if(!(this instanceof h))return new h(a);
this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=h;exports._=h}else a._=h;h.VERSION="1.4.4";var q=h.each=h.forEach=function(a,b,g){if(a!=null)if(u&&a.forEach===u)a.forEach(b,g);else if(a.length===+a.length)for(var e=0,k=a.length;e<k;e++){if(b.call(g,a[e],e,a)===c)break}else for(e in a)if(h.has(a,e)&&b.call(g,a[e],e,a)===c)break};h.map=h.collect=function(a,b,g){var c=[];if(a==null)return c;if(v&&a.map===v)return a.map(b,g);q(a,
function(a,m,h){c[c.length]=b.call(g,a,m,h)});return c};h.reduce=h.foldl=h.inject=function(a,b,g,c){var e=arguments.length>2;a==null&&(a=[]);if(p&&a.reduce===p)return c&&(b=h.bind(b,c)),e?a.reduce(b,g):a.reduce(b);q(a,function(a,m,h){e?g=b.call(c,g,a,m,h):(g=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return g};h.reduceRight=h.foldr=function(a,b,g,c){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return c&&(b=h.bind(b,c)),e?a.reduceRight(b,
g):a.reduceRight(b);var k=a.length;if(k!==+k)var i=h.keys(a),k=i.length;q(a,function(h,l,p){l=i?i[--k]:--k;e?g=b.call(c,g,a[l],l,p):(g=a[l],e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return g};h.find=h.detect=function(a,b,g){var c;E(a,function(a,m,h){if(b.call(g,a,m,h))return c=a,!0});return c};h.filter=h.select=function(a,b,g){var c=[];if(a==null)return c;if(s&&a.filter===s)return a.filter(b,g);q(a,function(a,m,h){b.call(g,a,m,h)&&(c[c.length]=a)});return c};
h.reject=function(a,b,g){return h.filter(a,function(a,m,c){return!b.call(g,a,m,c)},g)};h.every=h.all=function(a,b,g){b||(b=h.identity);var e=!0;if(a==null)return e;if(x&&a.every===x)return a.every(b,g);q(a,function(a,m,h){if(!(e=e&&b.call(g,a,m,h)))return c});return!!e};var E=h.some=h.any=function(a,b,g){b||(b=h.identity);var e=!1;if(a==null)return e;if(t&&a.some===t)return a.some(b,g);q(a,function(a,m,h){if(e||(e=b.call(g,a,m,h)))return c});return!!e};h.contains=h.include=function(a,b){if(a==null)return!1;
if(o&&a.indexOf===o)return a.indexOf(b)!=-1;return E(a,function(a){return a===b})};h.invoke=function(a,b){var c=g.call(arguments,2),e=h.isFunction(b);return h.map(a,function(a){return(e?b:a[b]).apply(a,c)})};h.pluck=function(a,b){return h.map(a,function(a){return a[b]})};h.where=function(a,b,g){if(h.isEmpty(b))return g?null:[];return h[g?"find":"filter"](a,function(a){for(var m in b)if(b[m]!==a[m])return!1;return!0})};h.findWhere=function(a,b){return h.where(a,b,!0)};h.max=function(a,b,g){if(!b&&
h.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&h.isEmpty(a))return-Infinity;var c={computed:-Infinity,value:-Infinity};q(a,function(a,m,h){m=b?b.call(g,a,m,h):a;m>=c.computed&&(c={value:a,computed:m})});return c.value};h.min=function(a,b,g){if(!b&&h.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&h.isEmpty(a))return Infinity;var c={computed:Infinity,value:Infinity};q(a,function(a,m,h){m=b?b.call(g,a,m,h):a;m<c.computed&&(c={value:a,computed:m})});
return c.value};h.shuffle=function(a){var b,g=0,c=[];q(a,function(a){b=h.random(g++);c[g-1]=c[b];c[b]=a});return c};var A=function(a){return h.isFunction(a)?a:function(b){return b[a]}};h.sortBy=function(a,b,g){var c=A(b);return h.pluck(h.map(a,function(a,b,m){return{value:a,index:b,criteria:c.call(g,a,b,m)}}).sort(function(a,b){var m=a.criteria,g=b.criteria;if(m!==g){if(m>g||m===void 0)return 1;if(m<g||g===void 0)return-1}return a.index<b.index?-1:1}),"value")};var F=function(a,b,g,c){var e={},k=
A(b||h.identity);q(a,function(b,h){var I=k.call(g,b,h,a);c(e,I,b)});return e};h.groupBy=function(a,b,g){return F(a,b,g,function(a,b,m){(h.has(a,b)?a[b]:a[b]=[]).push(m)})};h.countBy=function(a,b,g){return F(a,b,g,function(a,b){h.has(a,b)||(a[b]=0);a[b]++})};h.sortedIndex=function(a,b,g,c){for(var g=g==null?h.identity:A(g),b=g.call(c,b),e=0,k=a.length;e<k;){var i=e+k>>>1;g.call(c,a[i])<b?e=i+1:k=i}return e};h.toArray=function(a){if(!a)return[];if(h.isArray(a))return g.call(a);if(a.length===+a.length)return h.map(a,
h.identity);return h.values(a)};h.size=function(a){if(a==null)return 0;return a.length===+a.length?a.length:h.keys(a).length};h.first=h.head=h.take=function(a,b,c){if(a!=null)return b!=null&&!c?g.call(a,0,b):a[0]};h.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))};h.last=function(a,b,c){if(a!=null)return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]};h.rest=h.tail=h.drop=function(a,b,c){return g.call(a,b==null||c?1:b)};h.compact=function(a){return h.filter(a,h.identity)};
var G=function(a,b,g){q(a,function(a){h.isArray(a)?b?j.apply(g,a):G(a,b,g):g.push(a)});return g};h.flatten=function(a,b){return G(a,b,[])};h.without=function(a){return h.difference(a,g.call(arguments,1))};h.uniq=h.unique=function(a,b,g,c){h.isFunction(b)&&(c=g,g=b,b=!1);var g=g?h.map(a,g,c):a,e=[],k=[];q(g,function(g,c){if(b?!c||k[k.length-1]!==g:!h.contains(k,g))k.push(g),e.push(a[c])});return e};h.union=function(){return h.uniq(k.apply(e,arguments))};h.intersection=function(a){var b=g.call(arguments,
1);return h.filter(h.uniq(a),function(a){return h.every(b,function(b){return h.indexOf(b,a)>=0})})};h.difference=function(a){var b=k.apply(e,g.call(arguments,1));return h.filter(a,function(a){return!h.contains(b,a)})};h.zip=function(){for(var a=g.call(arguments),b=h.max(h.pluck(a,"length")),c=Array(b),e=0;e<b;e++)c[e]=h.pluck(a,""+e);return c};h.object=function(a,b){if(a==null)return{};for(var g={},c=0,e=a.length;c<e;c++)b?g[a[c]]=b[c]:g[a[c][0]]=a[c][1];return g};h.indexOf=function(a,b,g){if(a==
null)return-1;var c=0,e=a.length;if(g)if(typeof g=="number")c=g<0?Math.max(0,e+g):g;else return c=h.sortedIndex(a,b),a[c]===b?c:-1;if(o&&a.indexOf===o)return a.indexOf(b,g);for(;c<e;c++)if(a[c]===b)return c;return-1};h.lastIndexOf=function(a,b,g){if(a==null)return-1;var c=g!=null;if(D&&a.lastIndexOf===D)return c?a.lastIndexOf(b,g):a.lastIndexOf(b);for(g=c?g:a.length;g--;)if(a[g]===b)return g;return-1};h.range=function(a,b,g){arguments.length<=1&&(b=a||0,a=0);for(var g=arguments[2]||1,c=Math.max(Math.ceil((b-
a)/g),0),e=0,h=Array(c);e<c;)h[e++]=a,a+=g;return h};h.bind=function(a,b){if(a.bind===z&&z)return z.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return function(){return a.apply(b,c.concat(g.call(arguments)))}};h.partial=function(a){var b=g.call(arguments,1);return function(){return a.apply(this,b.concat(g.call(arguments)))}};h.bindAll=function(a){var b=g.call(arguments,1);b.length===0&&(b=h.functions(a));q(b,function(b){a[b]=h.bind(a[b],a)});return a};h.memoize=function(a,b){var g={};b||
(b=h.identity);return function(){var c=b.apply(this,arguments);return h.has(g,c)?g[c]:g[c]=a.apply(this,arguments)}};h.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};h.defer=function(a){return h.delay.apply(h,[a,1].concat(g.call(arguments,1)))};h.throttle=function(a,b){var g,c,e,h,k=0,i=function(){k=new Date;e=null;h=a.apply(g,c)};return function(){var l=new Date,p=b-(l-k);g=this;c=arguments;p<=0?(clearTimeout(e),e=null,k=l,h=a.apply(g,c)):e||
(e=setTimeout(i,p));return h}};h.debounce=function(a,b,g){var c,e;return function(){var h=this,k=arguments,i=g&&!c;clearTimeout(c);c=setTimeout(function(){c=null;g||(e=a.apply(h,k))},b);i&&(e=a.apply(h,k));return e}};h.once=function(a){var b=!1,g;return function(){if(b)return g;b=!0;g=a.apply(this,arguments);a=null;return g}};h.wrap=function(a,b){return function(){var g=[a];j.apply(g,arguments);return b.apply(this,g)}};h.compose=function(){var a=arguments;return function(){for(var b=arguments,g=a.length-
1;g>=0;g--)b=[a[g].apply(this,b)];return b[0]}};h.after=function(a,b){if(a<=0)return b();return function(){if(--a<1)return b.apply(this,arguments)}};h.keys=H||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],g;for(g in a)h.has(a,g)&&(b[b.length]=g);return b};h.values=function(a){var b=[],g;for(g in a)h.has(a,g)&&b.push(a[g]);return b};h.pairs=function(a){var b=[],g;for(g in a)h.has(a,g)&&b.push([g,a[g]]);return b};h.invert=function(a){var b={},g;for(g in a)h.has(a,g)&&(b[a[g]]=
g);return b};h.functions=h.methods=function(a){var b=[],g;for(g in a)h.isFunction(a[g])&&b.push(g);return b.sort()};h.extend=function(a){q(g.call(arguments,1),function(b){if(b)for(var g in b)a[g]=b[g]});return a};h.pick=function(a){var b={},c=k.apply(e,g.call(arguments,1));q(c,function(g){g in a&&(b[g]=a[g])});return b};h.omit=function(a){var b={},c=k.apply(e,g.call(arguments,1)),i;for(i in a)h.contains(c,i)||(b[i]=a[i]);return b};h.defaults=function(a){q(g.call(arguments,1),function(b){if(b)for(var g in b)a[g]==
null&&(a[g]=b[g])});return a};h.clone=function(a){if(!h.isObject(a))return a;return h.isArray(a)?a.slice():h.extend({},a)};h.tap=function(a,b){b(a);return a};var B=function(a,b,g,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof h)a=a._wrapped;if(b instanceof h)b=b._wrapped;var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==
+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;for(var k=g.length;k--;)if(g[k]==a)return c[k]==b;g.push(a);c.push(b);var k=0,i=!0;if(e=="[object Array]"){if(k=a.length,i=k==b.length)for(;k--;)if(!(i=B(a[k],b[k],g,c)))break}else{var e=a.constructor,p=b.constructor;if(e!==p&&(!h.isFunction(e)||!(e instanceof e&&h.isFunction(p)&&p instanceof p)))return!1;for(var j in a)if(h.has(a,
j)&&(k++,!(i=h.has(b,j)&&B(a[j],b[j],g,c))))break;if(i){for(j in b)if(h.has(b,j)&&!k--)break;i=!k}}g.pop();c.pop();return i};h.isEqual=function(a,b){return B(a,b,[],[])};h.isEmpty=function(a){if(a==null)return!0;if(h.isArray(a)||h.isString(a))return a.length===0;for(var b in a)if(h.has(a,b))return!1;return!0};h.isElement=function(a){return!!(a&&a.nodeType===1)};h.isArray=i||function(a){return l.call(a)=="[object Array]"};h.isObject=function(a){return a===Object(a)};q(["Arguments","Function","String",
"Number","Date","RegExp"],function(a){h["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}});if(!h.isArguments(arguments))h.isArguments=function(a){return!(!a||!h.has(a,"callee"))};if(typeof/./!=="function")h.isFunction=function(a){return typeof a==="function"};h.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};h.isNaN=function(a){return h.isNumber(a)&&a!=+a};h.isBoolean=function(a){return a===!0||a===!1||l.call(a)=="[object Boolean]"};h.isNull=function(a){return a===null};h.isUndefined=
function(a){return a===void 0};h.has=function(a,b){return w.call(a,b)};h.noConflict=function(){a._=b;return this};h.identity=function(a){return a};h.times=function(a,b,g){for(var c=Array(a),e=0;e<a;e++)c[e]=b.call(g,e);return c};h.random=function(a,b){b==null&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var y={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};y.unescape=h.invert(y.escape);var J={escape:RegExp("["+h.keys(y.escape).join("")+"]","g"),unescape:RegExp("("+
h.keys(y.unescape).join("|")+")","g")};h.each(["escape","unescape"],function(a){h[a]=function(b){if(b==null)return"";return(""+b).replace(J[a],function(b){return y[a][b]})}});h.result=function(a,b){if(a==null)return null;var g=a[b];return h.isFunction(g)?g.call(a):g};h.mixin=function(a){q(h.functions(a),function(b){var g=h[b]=a[b];h.prototype[b]=function(){var a=[this._wrapped];j.apply(a,arguments);a=g.apply(h,a);return this._chain?h(a).chain():a}})};var K=0;h.uniqueId=function(a){var b=++K+"";return a?
a+b:b};h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;h.template=function(a,b,g){var c,g=h.defaults({},g,h.templateSettings),e=RegExp([(g.escape||C).source,(g.interpolate||C).source,(g.evaluate||C).source].join("|")+"|$","g"),k=0,i="__p+='";a.replace(e,function(b,g,c,e,h){i+=a.slice(k,h).replace(M,function(a){return"\\"+
L[a]});g&&(i+="'+\n((__t=("+g+"))==null?'':_.escape(__t))+\n'");c&&(i+="'+\n((__t=("+c+"))==null?'':__t)+\n'");e&&(i+="';\n"+e+"\n__p+='");k=h+b.length;return b});i+="';\n";g.variable||(i="with(obj||{}){\n"+i+"}\n");i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{c=new Function(g.variable||"obj","_",i)}catch(l){throw l.source=i,l;}if(b)return c(b,h);b=function(a){return c.call(this,a,h)};b.source="function("+(g.variable||"obj")+"){\n"+
i+"}";return b};h.chain=function(a){return h(a).chain()};h.mixin(h);q(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=e[a];h.prototype[a]=function(){var g=this._wrapped;b.apply(g,arguments);(a=="shift"||a=="splice")&&g.length===0&&delete g[0];return this._chain?h(g).chain():g}});q(["concat","join","slice"],function(a){var b=e[a];h.prototype[a]=function(){var a=b.apply(this._wrapped,arguments);return this._chain?h(a).chain():a}});h.extend(h.prototype,{chain:function(){this._chain=
!0;return this},value:function(){return this._wrapped}})}).call(this);(function(){var a={},b=window,c=b.document,e;a.disabled=!1;a.set=function(){};a.get=function(){};a.remove=function(){};a.clear=function(){};a.transact=function(b,g,c){var e=a.get(b);c==null&&(c=g,g=null);typeof e=="undefined"&&(e=g||{});c(e);a.set(b,e)};a.getAll=function(){};a.serialize=function(a){return JSON.stringify(a)};a.deserialize=function(a){if(typeof a=="string")return JSON.parse(a)};var i;try{i="localStorage"in b&&b.localStorage}catch(j){i=
!1}if(i)e=b.localStorage,a.set=function(b,g){if(g===void 0)return a.remove(b);e.setItem(b,a.serialize(g))},a.get=function(b){return a.deserialize(e.getItem(b))},a.remove=function(a){e.removeItem(a)},a.clear=function(){e.clear()},a.getAll=function(){for(var b={},g=0;g<e.length;++g){var c=e.key(g);b[c]=a.get(c)}return b};else{var g;try{g="globalStorage"in b&&b.globalStorage&&b.globalStorage[b.location.hostname]}catch(k){g=!1}if(g)e=b.globalStorage[b.location.hostname],a.set=function(b,g){if(g===void 0)return a.remove(b);
e[b]=a.serialize(g)},a.get=function(b){return a.deserialize(e[b]&&e[b].value)},a.remove=function(a){delete e[a]},a.clear=function(){for(var a in e)delete e[a]},a.getAll=function(){for(var b={},g=0;g<e.length;++g){var c=e.key(g);b[c]=a.get(c)}return b};else if(c.documentElement.addBehavior){var l,w;try{w=new ActiveXObject("htmlfile"),w.open(),w.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),w.close(),l=w.w.frames[0].document,e=l.createElement("div")}catch(u){e=c.createElement("div"),
l=c.body}b=function(b){return function(){var g=Array.prototype.slice.call(arguments,0);g.unshift(e);l.appendChild(e);e.addBehavior("#default#userData");e.load("localStorage");g=b.apply(a,g);l.removeChild(e);return g}};a.set=b(function(b,g,c){g="_"+g;if(c===void 0)return a.remove(g);b.setAttribute(g,a.serialize(c));b.save("localStorage")});a.get=b(function(b,g){return a.deserialize(b.getAttribute("_"+g))});a.remove=b(function(a,b){a.removeAttribute("_"+b);a.save("localStorage")});a.clear=b(function(a){var b=
a.XMLDocument.documentElement.attributes;a.load("localStorage");for(var g=0,c;c=b[g];g++)a.removeAttribute(c.name);a.save("localStorage")});a.getAll=b(function(b){var g=b.XMLDocument.documentElement.attributes;b.load("localStorage");for(var b={},c=0,e;e=g[c];++c)b[e]=a.get(e);return b})}}try{a.set("__storejs__","__storejs__");if(a.get("__storejs__")!="__storejs__")a.disabled=!0;a.remove("__storejs__")}catch(v){a.disabled=!0}typeof module!="undefined"&&typeof module!="function"?module.exports=a:typeof define===
"function"&&define.amd?define(a):this.store=a})();(function(a,b){var c=function(a){this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"(n != 1);"}}},domain:"messages"};this.options=_.extend({},this.defaults,a);this.textdomain(this.options.domain);if(a.domain&&!this.options.locale_data[this.options.domain])throw Error("Text domain set to non-existent domain: `"+a.domain+"`");};c.context_delimiter=String.fromCharCode(4);var e=_.memoize(function(a){return _.partial(function(a,
b){var c=a(b);return c===!0?1:c?c:0},new Function("n","return "+(a||"(n != 1)")))});_.extend(c.prototype,{textdomain:function(a){if(!a)return this._textdomain;this._textdomain=a},gettext:function(a){return this.dcnpgettext.call(this,b,b,a)},dgettext:function(a,c){return this.dcnpgettext.call(this,a,b,c)},dcgettext:function(a,c){return this.dcnpgettext.call(this,a,b,c)},ngettext:function(a,c,g){return this.dcnpgettext.call(this,b,b,a,c,g)},dngettext:function(a,c,g,e){return this.dcnpgettext.call(this,
a,b,c,g,e)},dcngettext:function(a,c,g,e){return this.dcnpgettext.call(this,a,b,c,g,e)},pgettext:function(a,c){return this.dcnpgettext.call(this,b,a,c)},dpgettext:function(a,b,g){return this.dcnpgettext.call(this,a,b,g)},dcpgettext:function(a,b,g){return this.dcnpgettext.call(this,a,b,g)},npgettext:function(a,c,g,e){return this.dcnpgettext.call(this,b,a,c,g,e)},dnpgettext:function(a,b,g,c,e){return this.dcnpgettext.call(this,a,b,g,c,e)},dcnpgettext:function(a,b,g,k,l){k=k||g;a=a||this._textdomain;
l=typeof l=="undefined"?1:l;if(!this.options)return a=new c,a.dcnpgettext.call(a,void 0,void 0,g,k,l);if(!this.options.locale_data)throw Error("No locale data provided.");if(!this.options.locale_data[a])throw Error("Domain `"+a+"` was not found.");if(!this.options.locale_data[a][""])throw Error("No locale meta information provided.");if(!g)throw Error("No translation key found.");if(typeof l!="number"&&(l=parseInt(l,10),isNaN(l)))throw Error("The number that was passed in is not a number.");var b=
b?b+c.context_delimiter+g:g,w=this.options.locale_data[a],u=e(w[""].plural_forms)(l)+1;if(!w)throw Error("No domain named `"+a+"` could be found.");a=w[b];if(!a||u>=a.length)return this.options.missing_key_callback&&this.options.missing_key_callback(b),a=[null,g,k],a[e()(l)+1];a=a[u];if(!a)return a=[null,g,k],a[e()(l)+1];return a}});a.Jed=c})(this);r=window.r||{};r.setup=function(a){reddit=r.config=a;r.logging.init();r.config.currentOrigin=location.protocol+"//"+location.host;r.analytics.breadcrumbs.init()};
r.ajax=function(a){var b=a.url;if(a.type=="GET"){var c=r.preload.read(b);if(c!=null)return a.success(c),a=new jQuery.Deferred,a.resolve(c),a}if(b&&(b[0]=="/"||b.lastIndexOf(r.config.currentOrigin,0)==0)){if(!a.headers)a.headers={};a.headers["X-Modhash"]=r.config.modhash}return $.ajax(a)};store.safeGet=function(a,b){if(store.disabled)return b;try{return store.get(a)}catch(c){return r.sendError('Unable to read storage key "%(key)s" (%(err)s)'.format({key:a,err:c})),b}};store.safeSet=function(a,b){if(store.disabled)return!1;
try{return store.set(a,b),!0}catch(c){return r.warn('Unable to set storage key "%(key)s" (%(err)s)'.format({key:a,err:c})),!1}};r.setupBackbone=function(){Backbone.emulateJSON=!0;Backbone.ajax=r.ajax};$(function(){try{r.setupBackbone(),r.login.ui.init(),r.analytics.init(),r.ui.init(),r.interestbar.init(),r.visited.init(),r.apps.init(),r.wiki.init(),r.gold.init(),r.multi.init()}catch(a){r.sendError("Error during base.js init",a)}});r.preload={timestamp:new Date,maxAge:3E5,data:{},isExpired:function(){return new Date-
this.timestamp>this.maxAge},set:function(a){_.extend(this.data,a)},read:function(a){var b=this.data[a];if(a[0]=="#")return b;if(!this.isExpired())return b}};r.logging={};r.logging.pageAgeLimit=300;r.logging.sendThrottle=8;r.logging.init=function(){_.each(["debug","log","warn","error"],function(a){r[a]=(a!="debug"||r.config.debug)&&window.console&&console[a]?_.bind(console[a],console):function(){}});r.sendError=r.logging.sendError};r.logging.serverLogger={logCount:0,_queuedLogs:[],queueLog:function(a){if(this.logCount>=
3)r.warn("Not sending debug log; already sent",this.logCount);else{var b=new Date/1E3-r.config.server_time;Math.abs(b)>r.logging.pageAgeLimit?r.warn("Not sending debug log; page too old:",b):r.config.send_logs?(a.url=window.location.toString(),this._queuedLogs.push(a),this.logCount++,_.defer(_.bind(function(){this._sendLogs()},this))):r.warn("Server-side debug logging disabled")}},_sendLogs:_.throttle(function(){var a=this._queuedLogs.length;r.ajax({type:"POST",url:"/web/log/error.json",data:{logs:JSON.stringify(this._queuedLogs)},
headers:{"X-Loggit":!0},success:function(){r.log("Sent",a,"debug logs to server")},error:function(a,c,e){r.warn("Error sending debug logs to server:",c,";",e)}});this._queuedLogs=[]},r.logging.sendThrottle*1E3)};r.logging.sendError=function(){r.error.apply(r,arguments);r.logging.serverLogger.queueLog({msg:_.toArray(arguments).join(" ")})};r.ui={};r.ui.Base=function(a){this.$el=$(a)};r.ui.collapsibleSideBox=function(a){var b=$("#"+a);return new r.ui.Collapse(b.find(".title"),b.find(".content"),a)};
r.ui.Collapse=function(a,b,c){r.ui.Base.call(this,a);this.target=b;this.key="ui.collapse."+c;this.isCollapsed=store.safeGet(this.key)==!0;this.$el.click($.proxy(this,"toggle",null,!1));this.toggle(this.isCollapsed,!0)};r.ui.Collapse.prototype={animDuration:200,toggle:function(a,b){a==null&&(a=!this.isCollapsed);var c=b?0:this.animDuration;a?$(this.target).slideUp(c):$(this.target).slideDown(c);this.isCollapsed=a;store.safeSet(this.key,a);this.update()},update:function(){this.$el.find(".collapse-button").text(this.isCollapsed?
"+":"-")}};r.ui.Summarize=function(a,b){r.ui.Base.call(this,a);this.maxCount=b;this._updateItems();if(this.$hiddenItems.length>0)this.$toggleButton=$('<button class="expand-summary">').click($.proxy(this,"_toggle")),this.$el.after(this.$toggleButton),this._summarize()};r.ui.Summarize.prototype={_updateItems:function(){var a=this.$el.children(".important"),b=this.$el.children(":not(.important)"),c=this.maxCount?Math.max(0,this.maxCount-a.length):0,e=b.slice(0,c-1);this.$summaryItems=a.add(e);this.$hiddenItems=
b.slice(c)},_summarize:function(){this.$el.addClass("summarized");this.$hiddenItems.hide();this.$toggleButton.html(r._("&hellip; and %(count)s more &rArr;").format({count:this.$hiddenItems.length}))},_expand:function(){this.$el.removeClass("summarized");this.$hiddenItems.show();this.$toggleButton.html(r._("&lArr; less"))},_toggle:function(a){this.$el.hasClass("summarized")?this._expand():this._summarize();a.preventDefault()}};r.i18n={jed:new Jed({locale_data:{messages:{"":{domain:"messages",lang:"en"}}}}),
setPluralForms:function(a){this.jed.options.locale_data.messages[""].plural_forms=a},addMessages:function(a){_.extend(this.jed.options.locale_data.messages,a)}};r._=_.bind(r.i18n.jed.gettext,r.i18n.jed);r.P_=_.bind(r.i18n.jed.ngettext,r.i18n.jed);r.N_=_.identity;r.utils={clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},staticURL:function(a){return r.config.static_root+"/"+a},s3HTTPS:function(a){return location.protocol=="https:"?a.replace("http://","https://s3.amazonaws.com/"):a},joinURLs:function(){return _.map(arguments,
function(a,b){b>0&&a&&a[0]!="/"&&(a="/"+a);return a}).join("")},tup:function(a){_.isArray(a)||(a=[a]);return a},querySelectorFromEl:function(a,b){return $(a).parents().andSelf().filter(b||"*").map(function(a,b){var i=[],j=$(b),g=j.data("fullname"),k=j.attr("id"),j=j.attr("class");i.push(b.nodeName.toLowerCase());g?i.push('[data-fullname="'+g+'"]'):k?i.push("#"+k):j&&i.push("."+_.compact(j.split(/\s+/)).join("."));return i.join("")}).toArray().join(" ")},serializeForm:function(a){var b={};$.each(a.serializeArray(),
function(a,e){b[e.name]=e.value});return b},_pyStrFormatRe:/%\((\w+)\)s/g,pyStrFormat:function(a,b){return a.replace(this._pyStrFormatRe,function(a,e){if(!(e in b))throw"missing format parameter";return b[e]})},_mdLinkRe:/\[(.*?)\]\((.*?)\)/g,formatMarkdownLinks:function(a){return _.escape(a).replace(this._mdLinkRe,function(a,c,e){return'<a href="'+e+'">'+c+"</a>"})},prettyNumber:function(a){var b=parseInt(a);return b?b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):a},LRUCache:function(a){var b=
a>0?a:16,c=[],e={},i=function(a){j(a);c.push(a);c.length>b&&delete e[c.shift()]},j=function(a){a=_.indexOf(c,a);a>=0&&c.splice(a,1)};this.remove=function(a){j(a);delete e[a]};this.set=function(a,b){_.isUndefined(b)?this.remove(a):(e[a]=b,i(a))};this.get=function(a){var b=e[a];_.isUndefined(b)||i(a);return b};this.ajax=function(a,b){var c=this.get(a);return _.isUndefined(c)?$.ajax(b).done(_.bind(this.set,this,a)):(new $.Deferred).resolve(c)}}};String.prototype.format=function(a){return r.utils.pyStrFormat(this,
a)};r.analytics={trackers:{},_pendingTrackers:{},init:function(){$(document).delegate(".organic-listing .promotedlink.promoted","onshow",_.bind(function(a){this.fetchTrackersOrFirePixel(a.target)},this));$(".promotedlink.promoted:visible").trigger("onshow");$("form.gold-checkout").one("submit",this.fireGoldCheckout)},fetchTrackingHash:function(a){var b=$(a),a=b.data("fullname"),b=b.data("cid");a+="-"+(b||"");r.config.is_fake||(a+="-"+r.config.post_site);a in this.trackers||(this._pendingTrackers[a]=
this.trackers[a]=new $.Deferred,this.fetchTrackingHashes());return this.trackers[a]},fetchTrackingHashes:_.debounce(function(){var a=this._pendingTrackers;$.ajax({url:r.config.fetch_trackers_url,type:"get",dataType:"jsonp",data:{ids:_.keys(a)},success:function(b){_.each(b,function(b,e){a[e].resolve(e,b)})}});this._pendingTrackers={}},0),fetchTrackersOrFirePixel:function(a){this.fetchTrackingHash(a).done(_.bind(function(b,c){this.fireTrackingPixel(a,b,c)},this))},fireTrackingPixel:function(a,b,c){a=
$(a);if(!a.data("trackerFired")){(new Image).src=r.config.adtracker_url+"?"+$.param({id:b,hash:c,r:Math.round(Math.random()*2147483647)});var e=new Image,i=a.data("adserverImpPixel");a.data("adserverClickUrl");if(i)e.src=i;var e=a.find("a.title"),i=e.html(),j=e.attr("href"),b=r.config.clicktracker_url+"?"+$.param({id:b,hash:c,url:j});save_href(e);e.attr("href",b);e.html()!=i&&e.html(i);c=a.find("a.thumbnail");save_href(c);c.attr("href",b);a.hasClass("self")&&(c=a.find("a.comments"),save_href(c),c.attr("href",
b));a.data("trackerFired",!0)}},fireUITrackingPixel:function(a,b){(new Image).src=r.config.uitracker_url+"?"+$.param(_.extend({act:a,sr:b,r:Math.round(Math.random()*2147483647)},r.analytics.breadcrumbs.toParams()))},fireGoldCheckout:function(a){var b=$(this),c=b.data("vendor");b.parent().addClass("working");_gaq.push(["_trackPageview","/gold/external/"+c]);_gaq.push(function(){setTimeout(function(){b.submit()},500)});_gat&&_gat._getTracker&&a.preventDefault()}};r.analytics.breadcrumbs={selector:".thing, .side, .sr-list, .srdrop, .tagline, .md, .organic-listing, .gadget, .sr-interest-bar, a, button, input",
maxLength:3,sendLength:2,init:function(){this.hasSessionStorage=this._checkSessionStorage();this.data=this._load();this.data[0]&&this.data[0].url==window.location||this._storeBreadcrumb();$(document).delegate("a, button","click",$.proxy(function(a){this.storeLastClick($(a.target))},this))},_checkSessionStorage:function(){try{return sessionStorage.setItem("__test__","test"),sessionStorage.removeItem("__test__"),!0}catch(a){return!1}},_load:function(){if(!this.hasSessionStorage)return[{stored:!1}];
var a;try{a=JSON.parse(sessionStorage.breadcrumbs)}catch(b){a=[]}_.isArray(a)||(a=[]);return a},store:function(){this.hasSessionStorage&&(sessionStorage.breadcrumbs=JSON.stringify(this.data))},_storeBreadcrumb:function(){var a={url:location.toString()};if("referrer"in document){var b=!document.referrer.match("^"+r.config.currentOrigin),c=this.data[0]&&document.referrer!=this.data[0].url;if(b||c)a.ref=document.referrer}this.data.unshift(a);this.data=this.data.slice(0,this.maxLength);this.store()},
storeLastClick:function(a){try{this.data[0].click=r.utils.querySelectorFromEl(a,this.selector),this.store()}catch(b){}},lastClickFullname:function(){var a=_.find(this.data,function(a){return a.click});if(a)return(a=a.click.match(/.*data-fullname="(\w+)"/))&&a[1]},toParams:function(){params=[];for(var a=0;a<this.sendLength;a++)_.each(this.data[a],function(b,c){params["c"+a+"_"+c]=b});return params}};(function(a){function b(){return function(b){if(b.jquery){var c={};c[0]=jQuery;a.map(b.jquery,function(b){var g=
b[0],e=b[1],i=b[2],b=b[3];if(typeof b=="string")b=a.unsafe(b);else for(var j=0;b.length&&j<b.length;j++)b[j]=a.unsafe(b[j]);i=="call"?c[e]=c[g].apply(c[g]._obj,b):i=="attr"?(c[e]=c[g][b],c[e]?c[e]._obj=c[g]:a.debug("unrecognized")):i=="refresh"?a.refresh():a.debug("unrecognized")})}}}a.log=function(a){window.console?window.console.debug?window.console.debug(a):window.console.log&&window.console.log(a):alert(a)};a.debug=function(b){if(a.with_default(reddit.debug,!1))return a.log(b)};a.fn.debug=function(){a.debug(a(this));
return a(this)};a.redirect=function(a){window.location=a};a.fn.redirect=function(b){a(this).filter("form").find(".status").show().html("redirecting...");if(a(this).attr("target")=="_top"){for(var c=window;c!=c.parent;)c=c.parent;c.location=b}else a.redirect(b);return a(this)};a.refresh=function(){window.location.reload(!0)};a.defined=function(a){return typeof a!="undefined"};a.with_default=function(b,c){return a.defined(b)?b:c};a.websafe=function(a){typeof a=="string"&&(a=a.replace(/&/g,"&amp;").replace(/"/g,
"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));return a||""};a.unsafe=function(a){typeof a=="string"&&(a=a.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"));return a||""};a.uniq=function(a,b){for(var c=[],e={},i=b?b:a.length,j=0;j<a.length&&c.length<i;j++)e[a[j]]||(e[a[j]]=!0,c.push(a[j]));return c};(function(b,c){a.fn.show=function(c,e){a(this).trigger("onshow");return b.call(this,c,e)};a.fn.hide=function(b,g){a(this).trigger("onhide");return c.call(this,
b,g)}})(a.fn.show,a.fn.hide);var c={};a.handleResponse=b;a.request=function(g,e,i,j,u,v,p){var n=g,s=i;if(rate_limit(g))p&&p("ratelimit");else if(!(window!=window.top&&!reddit.cnameframe&&!reddit.external_frame)){if(!(s=!a.with_default(j,!1)))s=c[n]?!1:c[n]=!0;j=s;e=a.with_default(e,{});i=a.with_default(i,b(n));u=a.with_default(u,"json");typeof i!="function"&&(i=b(n));s=function(a){delete c[n];return i(a)};errorhandler_in=a.with_default(p,function(){});p=function(a){delete c[n];return errorhandler_in(a)};
v=a.with_default(v,!1);if(reddit.post_site)e.r=reddit.post_site;if(reddit.cnameframe)e.cnameframe=1;if(reddit.logged)e.uh=reddit.modhash;e.renderstyle=reddit.renderstyle;j&&a.ajax({type:v?"GET":"POST",url:"/api/"+g,data:e,success:s,error:p,dataType:u})}};rate_limit=function(){var a={vote:333,comment:5E3,ignore:0,ban:0,unban:0,assignad:0},b={},c=Date;return function(e){var i=new c,j=e in a?a[e]:333,p=b[e];b[e]=i;return p&&i-p<j}}();a.fn.vote=function(b,c,e,i){if(reddit.logged&&a(this).hasClass("arrow")){var j=
a(this).hasClass("up")?1:a(this).hasClass("down")?-1:0,v=a(this).all_things_by_id(),p=v.children().not(".child").find(".arrow"),n=j==1?"up":"upmod";p.filter("."+n).removeClass(n).addClass(j==1?"upmod":"up");n=j==-1?"down":"downmod";p.filter("."+n).removeClass(n).addClass(j==-1?"downmod":"down");reddit.logged&&(v.each(function(){var b=a(this).find(".entry:first, .midcol:first");j>0?b.addClass("likes").removeClass("dislikes unvoted"):j<0?b.addClass("dislikes").removeClass("likes unvoted"):b.addClass("unvoted").removeClass("likes dislikes")}),
a.defined(i)||(i=v.filter(":first").thing_id(),b+=e?"":"-"+i,a.request("vote",{id:i,dir:j,vh:b})));c&&c(v,j)}};a.fn.show_unvotable_message=function(){a(this).thing().find(".entry:first .unvotable-message").css("display","inline-block")};a.fn.thing=function(){return this.parents(".thing:first")};a.fn.all_things_by_id=function(){return this.thing().add(a.things(this.thing_id()))};a.fn.thing_id=function(b){var b=a.with_default(b,"thing"),c=this.hasClass("thing")?this:this.thing();b!="thing"&&(c=c.find("."+
b+":first"));if(c.length)return b=a.grep(c.get(0).className.match(/\S+/g),function(a){return a.match(/^id-/)}),b.length?b[0].slice(3,b[0].length):"";return""};a.things=function(){var b=a.map(arguments,function(a){return".thing.id-"+a}).join(", ");return a(b)};a.fn.same_author=function(){var b=a(this).thing_id("author"),c=[];a(".author.id-"+b).each(function(){c.push(".thing.id-"+a(this).thing_id())});return a(c.join(", "))};a.fn.things=function(){return this.find(a.map(arguments,function(a){return".thing.id-"+
a}).join(", "))};a.listing=function(b){b=b||"";if(b.slice(0,1)=="#"||b.slice(0,1)==".")b=b.slice(1,b.length);var c=b;b.slice(0,9)!="siteTable"?c="siteTable"+(b?"_"+b:""):b=b.slice(10,b.length);var e=a("#"+c).filter(":first");e.length==0&&(e=a.things(b).find(".child").append(document.createElement("div")).children(":last").addClass("sitetable").attr("id",c));return e};var e=function(){};a.fn.set_thing_init=function(b){e=b;a(this).find(".thing:not(.stub)").each(function(){b(this)})};a.fn.new_thing_child=
function(b,c){var e=this.thing_id(),i=c?a.listing(e):this.thing().find(".child:first");return(typeof b=="string"?i.prepend(b).children(":first"):b.hide().prependTo(i).show().find('input[name="parent"]').val(e).end()).randomize_ids()};a.fn.randomize_ids=function(){var b=(Math.random()+"").split(".")[1];a(this).find("*[id]").each(function(){a(this).attr("id",a(this).attr("id")+b)}).end().find("label").each(function(){a(this).attr("for",a(this).attr("for")+b)});return a(this)};a.fn.replace_things=function(b,
c,i,j){var u=this;return a.map(b,function(b){var g=b.data,b=a(u).things(g.id);j&&(b=b.filter(".stub"));if(b.length==0){var n=a.things(g.parent);n.length&&(b=a("<div></div>"),n.find(".child:first").append(b))}b.after(a.unsafe(g.content));g=b.next();c&&(g.show().children(".midcol, .entry").hide().end().children(".child:first").html(b.children(".child:first").remove().html()).end(),i&&(b.hide(),g.children(".midcol, .entry").show()),g.find(".rank:first").html(b.find(".rank:first").html()));i?(b.hide(),
c?g.children(".midcol, .entry").show():g.show()):g.hide();b.remove();e(g);a(document).trigger("new_thing",g);return g})};a.insert_things=function(b,c){return a.map(b,function(b){var b=b.data,g=a.listing(b.parent),g=c?g.append(a.unsafe(b.content)).children(".thing:last"):g.prepend(a.unsafe(b.content)).children(".thing:first");e(g.hide().show());a(document).trigger("new_thing",g);return g})};a.fn.delete_table_row=function(b){var c=this.parents("tr:first").get(0),e=this.parents("table").get(0);c?a(c).fadeOut(function(){e.deleteRow(c.rowIndex);
b&&b()}):b&&b()};a.fn.insert_table_rows=function(b,c){var e=this.is("table")?this.filter("table"):this.parents("table:first");a.map(e.get(),function(e){a.map(b,function(b){var g=c;g<0&&(g=Math.max(e.rows.length+g+1,0));var g=Math.min(g,e.rows.length),i=e.insertRow(g);a(i).hide().attr("id",b.id).addClass(b.css_class);a.map(b.cells,function(b){a(i.insertCell(i.cells.length)).html(a.unsafe(b)).trigger("insert-cell")});a(i).trigger("insert-row");a(i).fadeIn()})});return this};a.fn.captcha=function(a){var b=
this.find(".capimage");a&&b.attr("src","/captcha/"+a+".png").parents("form").find('input[name="iden"]').val(a);return b};a.fn.insertAtCursor=function(b){return a(this).filter("textarea").each(function(){var c=a(this).get(0),e=c.scrollTop;if(document.selection)c.focus(),document.selection.createRange().text=b;else if(c.selectionStart){var i=c.selectionStart;c.value=c.value.substring(0,c.selectionStart)+b+c.value.substring(c.selectionEnd,c.value.length);i+=b.length;c.setSelectionRange(i,i)}else c.value+=
b;if(c.scrollHeight)c.scrollTop=e;a(this).focus()}).end()};a.fn.select_line=function(b){return a(this).filter("textarea").each(function(){var c="\n",e=1,i=0;a.browser.msie&&(c="\r",e=0,i=1);for(var c=a(this).val().split(c),j=0;j<b-1;j++)i+=c[j].length+e;j=i;b<=c.length&&(j+=c[b-1].length+e);a(this).focus();this.createTextRange?(e=this.createTextRange(),e.move("character",i),i=this.createTextRange(),i.move("character",j),e.setEndPoint("StartToEnd",i),e.select()):this.selectionStart&&this.setSelectionRange(i,
j);if(this.scrollHeight)this.scrollTop=(b-2)*(this.scrollHeight/c.length)})};a.apply_stylesheet=function(b){var c=a("head").children("link[title], style[title]").filter(":first").attr("title")||"preferred stylesheet";if(document.styleSheets[0].cssText)for(var e=document.styleSheets,i=0;i<e.length;i++){if(e[i].title==c){e[i].cssText=b;break}}else a("head").children('*[title="'+c+'"]').remove(),a('<style type="text/css" media="screen"></style>').attr("title",c).text(b).appendTo("head")};a.rehighlight_new_comments=
function(){checked=a(".comment-visits-box input:checked");checked.length>0&&highlight_new_comments(checked[0].value)};var i;a.default_cookie_domain=function(a){a&&(i=a)};var j="_";a.cookie_name_prefix=function(a){a&&(j=a+"_")};a.cookie_write=function(b){if(b.name){var c={};c.expires=b.expires;c.domain=b.domain||i;c.path=b.path||"/";var e=j+b.name,b=b.data;b===null||b==""?b=null:typeof b!="string"&&(b=JSON.stringify(b));a.cookie(e,b,c)}};a.cookie_read=function(b,c){var e=a.cookie((c||j)+b);try{e=JSON.parse(e)}catch(i){}return{name:b,
data:e}}})(jQuery);var open_menu=function(a){$(a).siblings(".drop-choices").not(".inuse").css("top",a.offsetHeight+"px").each(function(){$(this).css("left",$(a).position().left+"px").css("top",$(a).height()+$(a).position().top+"px")}).addClass("active inuse")},close_menus=function(a){$(".drop-choices.inuse").not(".active").removeClass("inuse");$(".drop-choices.active").removeClass("active").trigger("close_menu");$(".flairselector").empty();$(a.target).closest("#search").length==0&&($("#moresearchinfo").slideUp(),
$("#searchexpando").length==1?$("#searchexpando").slideUp(function(){$("#search_showmore").parent().show()}):$("#search_showmore").parent().show())},hover_open_menu=function(){},select_tab_menu=function(a,b){var c="tabbedpane-"+b,e=$(a).parent().parent().parent();e.find(".tabmenu li").removeClass("selected");$(a).parent().addClass("selected");e.find(".tabbedpane").each(function(){this.style.display=this.id==c?"block":"none"})},update_user=function(a){try{var b=$(a).find('input[name="user"]').val();
a.action+="/"+b}catch(c){}return!0},post_user=function(a,b){var c=$(a).find('input[name="user"]').val();return c==null?post_form(a,b):post_form(a,b+"/"+c)},post_form=function(a,b,c,e,i){try{return c==null&&(c=function(){return reddit.status_msg.submitting}),$(a).find(".error").not(".status").hide(),$(a).find(".status").html(c(a)).show(),simple_post_form(a,b,{},i)}catch(j){return!1}},get_form_fields=function(a,b,c){b=b||{};c||(c=function(){return!0});$(a).find("select, input, textarea").not(".gray, :disabled").each(function(){var a=
$(this),i=a.attr("type");if(c(this))if(a.data("send-checked"))b[a.attr("name")]=a.is(":checked");else if(i!="radio"&&i!="checkbox"||a.is(":checked"))b[a.attr("name")]=a.val()});if(b.id==null)b.id=$(a).attr("id")?"#"+$(a).attr("id"):"";return b},form_error=function(a){return function(b){b=b=="ratelimit"?r._("please wait a few seconds and try again."):r._("an error occurred (status: %(status)s)").format({status:b.status});$(a).find(".status").text(b)}},simple_post_form=function(a,b,c,e,i){$.request(b,
get_form_fields(a,c),i,e,"json",!1,form_error(a));return!1},post_pseudo_form=function(a,b,c){$(a).find(".error").not(".status").hide();$(a).find(".status").html(reddit.status_msg.submitting).show();$.request(b,get_form_fields(a,{},function(b){b=$(b).parents("form:first");return b.length==0||b.get(0)==$(a).get(0)}),null,c,"json",!1,form_error(a));return!1},post_multipart_form=function(a){$(a).find(".error").not(".status").hide();$(a).find(".status").html(reddit.status_msg.submitting).show();return!0},
emptyInput=function(a,b){!$(a).val()||$(a).val()==b?$(a).addClass("gray").val(b).attr("rows",3):$(a).focus(function(){})},showlang=function(){$(".lang-popup:first").show();return!1},hidecover=function(a){$(a).parents(".cover-overlay").hide();return!1},deleteRow=function(a){$(a).delete_table_row()},change_state=function(a,b,c,e,i){var j=$(a).parents("form").first(),g=j.find('input[name="id"]'),g=g.length?g.val():$(a).thing_id();simple_post_form(j,b,{id:g},void 0,i);c&&c(j.length?j:a,b);$.defined(e)||
j.html(j.find('[name="executed"]').val());return!1},unread_thing=function(a){a=$(a);a.hasClass("thing")||(a=a.thing());$(a).addClass("new unread")},read_thing=function(a){a=$(a);a.hasClass("thing")||(a=a.thing());$(a).hasClass("new")?$(a).removeClass("new"):$(a).removeClass("unread");$.request("read_message",{id:$(a).thing_id()})},save_thing=function(a){$(a).thing().addClass("saved")},unsave_thing=function(a){$(a).thing().removeClass("saved")},toggle_save=function(a){var b=$(a).parents("form").first().find('[name="executed"]'),
c=b.val();$(a).thing().hasClass("saved")?change_state(a,"unsave",void 0,!0):change_state(a,"save",void 0,!0);$(a).thing().toggleClass("saved");b.val($(a).text());$(a).text(c)},click_thing=function(a){var b=$(a);b.hasClass("thing")||(b=b.thing());b.hasClass("message")&&b.hasClass("recipient")&&(b.hasClass("unread")?b.removeClass("unread"):b.hasClass("new")&&read_thing(a))},hide_thing=function(a){$(a).thing().fadeOut(function(){$(this).toggleClass("hidden");unexpando_child(a)})},toggle_label=function(a,
b,c){$(a).parent().find(".option").toggle();$(a)[0].onclick=function(){return toggle_label(a,c,b)};b&&b(a)},toggle=function(a,b,c){r.analytics.breadcrumbs.storeLastClick(a);var e=$(a).parent().andSelf().filter(".option").removeClass("active").siblings().addClass("active").get(0);if(c&&!e.onclick)e.onclick=function(){return toggle(e,c,b)};b&&b(a);return!1},cancelToggleForm=function(a,b,c,e){c&&$(a).filter("button").length&&(c=$(a).thing().find(c).children(":visible").filter(":first"),toggle(c));$(a).thing().find(b).each(function(){e&&
e($(this));$(this).hide().remove()});return!1},linkstatus=function(){return reddit.status_msg.submitting},subscribe=function(a){return function(){reddit.logged&&(reddit.cur_site==a&&$("body").addClass("subscriber"),$.things(a).find(".entry").addClass("likes"),$.request("subscribe",{sr:a,action:"sub"}),r.analytics.fireUITrackingPixel("sub",a))}},unsubscribe=function(a){return function(){reddit.logged&&(reddit.cur_site==a&&$("body").removeClass("subscriber"),$.things(a).find(".entry").removeClass("likes"),
$.request("subscribe",{sr:a,action:"unsub"}),r.analytics.fireUITrackingPixel("unsub",a))}},friend=function(a,b,c){return function(){reddit.logged&&(encoded=encodeURIComponent(document.referrer),$.request("friend?note="+encoded,{name:a,container:b,type:c}))}},unfriend=function(a,b,c){return function(){$.request("unfriend",{name:a,container:b,type:c})}},share=function(a){$.request("new_captcha");$(a).new_thing_child($(".sharelink:first").clone(!0).attr("id","sharelink_"+$(a).thing_id()),!1);$.request("new_captcha")},
cancelShare=function(a){return cancelToggleForm(a,".sharelink",".share-button")},reject_promo=function(a){$(a).thing().find(".rejection-form").show().find("textare").focus()},cancel_reject_promo=function(a){$(a).thing().find(".rejection-form").hide()},complete_reject_promo=function(a){$(a).thing().removeClass("accepted").addClass("rejected").find(".reject_promo").remove()},helpon=function(a){$(a).parents(".usertext-edit:first").children(".markhelp:first").show()},helpoff=function(a){$(a).parents(".usertext-edit:first").children(".markhelp:first").hide()},
show_all_messages=function(a){var b=[];$(a).parents(".message").find(".entry .collapsed").hide().end().find(".noncollapsed, .midcol:first").filter(":hidden").each(function(){var a=$(this).show().thing_id();b.indexOf(a)==-1&&b.push(a)});b.length&&$.request("uncollapse_message",{id:b.join(",")});return!1},hide_all_messages=function(a){var b=[];$(a).parents(".message").find(".entry .collapsed").show().end().find(".noncollapsed, .midcol:first").filter(":visible").each(function(){var a=$(this).hide().thing_id();
b.indexOf(a)==-1&&b.push(a)});b.length&&$.request("collapse_message",{id:b.join(",")});return!1},hidecomment=function(a){a=$(a).thing();a.hide().find(".noncollapsed:first, .midcol:first").hide().end().show().find(".entry:first .collapsed").show();a.hasClass("message")?$.request("collapse_message",{id:$(a).thing_id()}):a.find(".child:first").hide();return!1},showcomment=function(a){a=$(a).thing();a.find(".entry:first .collapsed").hide().end().find(".noncollapsed:first, .midcol:first").show().end().show();
a.hasClass("message")?$.request("uncollapse_message",{id:$(a).thing_id()}):a.find(".child:first").show();return!1},morechildren=function(a,b,c,e,i){$(a).html(reddit.status_msg.loading).css("color","red");a=$(a).parents(".thing.morechildren:first").thing_id();$.request("morechildren",{link_id:b,children:c,depth:e,id:a,pv_hex:i});return!1},moremessages=function(a){$(a).html(reddit.status_msg.loading).css("color","red");$.request("moremessages",{parent_id:$(a).thing_id()});return!1},add_thing_to_cookie=
function(a,b){var c=$(a).thing_id();if(c&&c.length)return add_thing_id_to_cookie(c,b)},add_thing_id_to_cookie=function(a,b){var c=$.cookie_read(b);if(!c.data)c.data="";if(c.data.substring(0,a.length)!=a){c.data=a+","+c.data;var e=c.data.split(",");if(e.length>5)e=$.uniq(e,5),c.data=e.join(",");$.cookie_write(c)}},clicked_items=function(){var a=$.cookie_read("recentclicks2");if(a&&a.data){for(var a=a.data.split(","),b=a.length-1;b>=0;b--)(!a[b]||!a[b].length)&&a.splice(b,1);return a}else return[]},
clear_clicked_items=function(){var a=$.cookie_read("recentclicks2");a.data="";$.cookie_write(a);$(".gadget").remove()},updateEventHandlers=function(a){var a=$(a),b=a.parent();$(a).filter(".link").find("a.title, a.comments").mousedown(function(){add_thing_to_cookie(this,"recentclicks2")});b.filter(".organic-listing").length&&(a.find(".hide-button a, .del-button a.yes, .report-button a.yes").each(function(){$(this).get(0).onclick=null}),a.find(".hide-button a").click(function(){var a=$(this).get(0);
change_state(a,"hide",function(){r.spotlight.next()})}),a.find(".del-button a.yes").click(function(){var a=$(this).get(0);change_state(a,"del",function(){r.spotlight.next()})}),a.find(".report-button a.yes").click(function(){var a=$(this).get(0);change_state(a,"report",function(){r.spotlight.next()})}))},last_click=function(){var a=r.analytics.breadcrumbs.lastClickFullname();a&&$("body").hasClass("listing-page")&&($(".last-clicked").removeClass("last-clicked"),$(".id-"+a).last().addClass("last-clicked"))},
login=function(){if(cnameframe)return!0;return post_user(this,"login")},register=function(){if(cnameframe)return!0;return post_user(this,"register")},fetch_title=function(){var a=$("#url-field"),b=a.find(".NO_URL"),a=a.find(".title-status"),c=$("#url").val();if(c){if(!$('form#newlink textarea[name="title"]').val()||confirm("This will replace your existing title, proceed?"))a.show().text(reddit.status_msg.loading),b.hide(),$.request("fetch_title",{url:c})}else a.hide(),b.show().text("a url is required")},
sr_cache=function(){if(!$.defined(reddit.sr_cache))reddit.sr_cache=[];return reddit.sr_cache},highlight_reddit=function(a){$("#sr-drop-down").children(".sr-selected").removeClass("sr-selected");a&&$(a).addClass("sr-selected")},update_dropdown=function(a){var b=$("#sr-drop-down");if(a.length){var c=b.children(":first");c.removeClass("sr-selected");b.children().remove();$.each(a,function(e){if(!(e>10)){var e=a[e],j=c.clone();j.text(e);b.append(j)}});var e=$("#sr-autocomplete").outerHeight();b.css("top",
e);b.show()}else b.hide()},sr_search=function(a){var a=a.toLowerCase(),b=sr_cache();b[a]?update_dropdown(b[a]):$.request("search_reddit_names.json",{query:a,include_over_18:r.config.over_18},function(c){b[a]=c.names;update_dropdown(c.names)})},sr_name_up=function(a){var b=$("#sr-autocomplete").val(),c=window.old_sr_name||"";window.old_sr_name=b;if(b=="")hide_sr_name_list();else if(!(a.keyCode==38||a.keyCode==40||a.keyCode==9))if(a.keyCode==27&&reddit.orig_sr)$("#sr-autocomplete").val(reddit.orig_sr),
hide_sr_name_list();else if(b!=c)reddit.orig_sr=b,sr_search($("#sr-autocomplete").val())},sr_name_down=function(a){var b=$("#sr-autocomplete");if(a.keyCode==38||a.keyCode==40){var a=a.keyCode==38&&"up"||"down",c=$("#sr-drop-down .sr-selected:first"),e=$("#sr-drop-down .sr-name-row:first"),i=$("#sr-drop-down .sr-name-row:last"),j=null,j=a=="down"?c.length?c.get(0)==i.get(0)?null:c.next(":first"):e:c.length?c.get(0)==e.get(0)?null:c.prev(":first"):i;highlight_reddit(j);j?b.val($.trim(j.text())):b.val(reddit.orig_sr);
return!1}else if(a.keyCode==13)return $("#sr-autocomplete").trigger("sr-changed"),hide_sr_name_list(),b.parents("form").submit(),!1},hide_sr_name_list=function(){$("#sr-drop-down").hide()},sr_dropdown_mdown=function(a){reddit.sr_mouse_row=a;return!1},sr_dropdown_mup=function(a){reddit.sr_mouse_row==a&&(a=$(a).text(),$("#sr-autocomplete").val(a),$("#sr-drop-down").hide(),$("#sr-autocomplete").trigger("sr-changed"))},set_sr_name=function(a){a=$(a).text();$("#sr-autocomplete").trigger("focus").val(a);
$("#sr-autocomplete").trigger("sr-changed")},select_form_tab=function(a,b,c){a=$(a).parent();a.addClass("selected").siblings().removeClass("selected");a=a.parent("ul").next(".formtabs-content");a.find(b).show().find(":input").removeAttr("disabled").end();a.find(c).hide().find(":input").attr("disabled",!0)},expando_cache=function(){if(!$.defined(reddit.thing_child_cache))reddit.thing_child_cache=[];return reddit.thing_child_cache},expando_child=function(a){var b=expando_cache(),c=$(a).thing();c.find(".expando-button").addClass("expanded").removeClass("collapsed").get(0).onclick=
function(){unexpando_child(a)};var e=c.find(".expando"),i=c.thing_id()+"_cache";b[i]?(e.html($.unsafe(b[i])),$(document).trigger("expando_thing",c)):$.request("expando",{link_id:c.thing_id()},function(a){b[i]=a;e.html($.unsafe(a));$(document).trigger("expando_thing",c)},!1,"html");e.show();return!1},unexpando_child=function(a){var b=$(a).thing();b.find(".expando-button").addClass("collapsed").removeClass("expanded").get(0).onclick=function(){expando_child(a)};b.find(".expando").hide().empty()},show_edit_usertext=
function(a){var b=a.find(".usertext-edit"),c=a.find(".usertext-body"),e=b.find("div > textarea"),i=Math.max(c.children(".md").width(),500),j=Math.max(c.children(".md").height(),100);c.hide();b.show();e.css("width","");e.css("height","");e.get(0).scrollHeight>e.height()&&(c=Math.max(i-5,e.width()),e.width(c),b.width(c),b=Math.max(j,e.height()),e.height(b));a.find(".cancel, .save").show().end().find(".help-toggle").show().end();e.focus()},hide_edit_usertext=function(a){a.find(".usertext-edit").hide().end().find(".usertext-body").show().end().find(".cancel, .save").hide().end().find(".help-toggle").hide().end().find(".markhelp").hide().end()},
comment_reply_for_elem=function(a){var a=$(a),b=a.thing(),c=a.thing_id(),e=b.find(".child .usertext:first");if(!e.length||e.parent().thing_id()!=b.thing_id())e=$(".usertext.cloneable:first").clone(!0),a.new_thing_child(e),e.prop("thing_id").value=c,e.attr("id","commentreply_"+c),e.find(".error").hide();return e},edit_usertext=function(a){a=$(a).thing();a.find(".edit-usertext:first").parent("li").andSelf().hide();show_edit_usertext(a.find(".usertext:first"))},cancel_usertext=function(a){a=$(a);a.thing().find(".edit-usertext:first").parent("li").andSelf().show();
hide_edit_usertext(a.closest(".usertext"))},save_usertext=function(a){$(a).thing().find(".edit-usertext:first").parent("li").andSelf().show()},reply=function(a){var b=comment_reply_for_elem(a),c=b.find("textarea");if(window.getSelection&&c.val().length==0){var e=window.getSelection(),i=$(e.focusNode).parents(".md").first(),j=$(e.anchorNode).parents(".md").first();i.length&&i.is(j)&&(e=e.toString(),e.length>0&&(e=e.replace(/^/gm,"> "),c.val(e+"\n\n"),c.scrollTop(c.scrollHeight)))}show_edit_usertext(b);
b.show();b.find(".cancel").get(0).onclick=function(){b.hide()};$(a).thing().find(".showreplies:visible").click();return!1},toggle_distinguish_span=function(a){a=$(a).parents("form")[0];$(a).children().toggle()},set_distinguish=function(a,b){change_state(a,"distinguish/"+b);$(a).children().toggle()},populate_click_gadget=function(){if($(".click-gadget").length){var a=clicked_items();a&&a.length&&(a=$.uniq(a,5),a.sort(),$.request("gadget/click/"+a.join(","),void 0,void 0,void 0,"json",!0))}},toolbar_p=
function(){this.toggle_linktitle=function(a){$(".title, .submit, .url, .linkicon").toggle();$(a).is(".pushed-button")?$(a).parents(".middle-side").removeClass("clickable"):($(a).parents(".middle-side").addClass("clickable"),$(".url").children("form").children("input").focus().select());return this.toggle_pushed(a)};this.toggle_pushed=function(a){a=$(a);a.is(".pushed-button")?a.removeClass("pushed-button").addClass("popped-button"):a.removeClass("popped-button").addClass("pushed-button");return!1};
this.push_button=function(a){$(a).removeClass("popped-button").addClass("pushed-button")};this.pop_button=function(a){$(a).removeClass("pushed-button").addClass("popped-button")};this.serendipity=function(){this.push_button(".serendipity");return!0};this.show_panel=function(){$("body",parent.inner_toolbar.document).addClass("expanded")};this.hide_panel=function(){$("body",parent.inner_toolbar.document).removeClass("expanded")};this.resize_toolbar=function(){var a=$("body").height();parent.document.body.rows=
a+"px, 100%"};this.login_msg=function(){$(".toolbar-status-bar").show();$(".login-arrow").show();this.resize_toolbar();return!1};this.top_window=function(){for(var a=window;a!=a.parent;)a=a.parent;return a.parent};var a=null;this.panel_loadurl=function(b){try{return window.parent.inner_toolbar.reddit_panel.location==b?!1:(a!=null&&(this.pop_button(a),a=null),!0)}catch(e){return!0}};var b=0;this.comments_pushed=function(a){(b=!b)?(this.push_button(a),this.show_panel()):(this.pop_button(a),this.hide_panel())};
this.gourl=function(a,b){var i=$(a).find('input[type="text"]').val(),i=b+escape(i);this.top_window().location.href=i;return!1};this.pref_commentspanel_hide=function(){$.request("tb_commentspanel_hide")};this.pref_commentspanel_show=function(){$.request("tb_commentspanel_show")}},clear_all_langs=function(a){$(a).parents("td").find('input[type="checkbox"]').prop("checked",!1)},check_some_langs=function(a){$(a).parents("td").find("#some-langs").prop("checked",!0)},fetch_parent=function(a,b,c){$(a).css("color",
"red").html(reddit.status_msg.loading);var e=$(a).thing();if(e.find(".uncollapsed .parent").length==0){var i="";$.getJSON(b,function(b){$.each(b,function(){this&&this.data.children&&$.each(this.data.children,function(){if(this.data.name==c)i=this.data.body_html})});i&&e.find(".noncollapsed .md").first().before('<div class="parent rounded">'+$.unsafe(i)+"</div>");$(a).parent("li").andSelf().remove()})}return!1},big_mod_action=function(a,b){if(!a.hasClass("pressed"))a.addClass("pressed"),d={id:a.thing_id()},
a.siblings(".status-msg").hide(),b==-1?(d.spam=!1,$.request("remove",d,null,!0),a.siblings(".removed").show()):b==-2?($.request("remove",d,null,!0),a.siblings(".spammed").show()):b==1&&($.request("approve",d,null,!0),a.siblings(".approved").show());a.siblings(".pretty-button").removeClass("pressed");return!1},big_mod_toggle=function(a,b,c){a.toggleClass("pressed");$.request(a.is(".pressed")?b:c,{id:a.thing_id()},null,!0);return!1};$(function(){function a(){return toggle(this)}$("body").click(close_menus);
$("body").set_thing_init(updateEventHandlers);"placeholder"in document.createElement("input")||$("textarea[placeholder], input[placeholder]").addClass("gray").each(function(){var a=$(this),c=a.attr("placeholder");a.val()==""&&a.val(c)});$("textarea.gray, input.gray").focus(function(){$(this).attr("rows",7).filter(".gray").removeClass("gray").val("")});reddit.logged&&$.cookie_name_prefix(reddit.logged);$.default_cookie_domain(reddit.cur_domain.split(":")[0]);last_click();$(window).on("pageshow",function(){last_click()});
$('#search input[name="q"]').focus(function(){$("#searchexpando").slideDown()});$("#search_showmore").click(function(a){$("#search_showmore").parent().hide();$("#moresearchinfo").slideDown();a.preventDefault()});$("#moresearchinfo").prepend('<a href="#" id="search_hidemore">[-]</a>');$("#search_hidemore").click(function(a){$("#search_showmore").parent().show();$("#moresearchinfo").slideUp();a.preventDefault()});$("#shortlink-text").click(function(){$(this).select()});$("body").delegate(".ajax-yn-button",
"submit",function(){var a=$(this).find('input[name="_op"]').val();post_form(this,a);return!1}).delegate(".ajax-yn-button .togglebutton","click",a).delegate(".ajax-yn-button .no","click",a).delegate(".ajax-yn-button .yes","click",function(){$(this).closest("form").submit()})});var show_friend=function(a){$("div.content .author.id-"+a).addClass("friend").next(".userattrs").each(function(){$(this).html()?$(this).find(".friend").length==0&&$(this).find("a:first").debug().before('<a class="friend" title="friend" href="/prefs/friends">F</a>,'):
$(this).html(' [<a class="friend" title="friend" href="/prefs/friends">F</a>]')})},show_unfriend=function(a){$(".author.id-"+a).removeClass("friend").next(".userattrs").each(function(){$(this).find("a.friend").remove();$(this).find("a").length==0&&$(this).html("")})},show_saved=function(a){var a=$(".id-"+a),b=a.find(".buttons").first().find(".comment-save-button");form='<li class="comment-unsave-button"><form action="/post/unsave" method="post" class="state-button unsave-button">';form+='<input type="hidden" name="executed" value="unsaved"/><span>';
form+='<a href="javascript:void(0)" onclick="return change_state(this, \'unsave\', unsave_thing);">unsave</a></span></form></li>';b.replaceWith(form);a.addClass("saved")},search_feedback=function(a,b){f=$("form#search");var c=f.find('input[name="q"]').val(),e=f.find('input[name="sort"]').val(),i=f.find('input[name="t"]').val();$.request("searchfeedback",{q:c,sort:e,t:i,approval:b},null,!0);a.siblings(".pretty-button").removeClass("pressed");a.siblings(".thanks").show();a.addClass("pressed");return!1},
highlight_new_comments=function(a){var b;for(b=0;b<=9;b++)items=$(".comment-period-"+b),a>=0&&b>=a?items.addClass("new-comment"):items.removeClass("new-comment")},save_href=function(a){a.attr("srcurl")||a.attr("srcurl",a.attr("href"));return a},pure_domain=function(a){(a=a.match(/:\/\/([^/]+)/))&&(a=a[1].replace(/^www\./,""));return a},parse_domain=function(a){var b=pure_domain(a);b||(a=a.match(/\/r\/([^/]+)/))&&(b="self."+a[1].toLowerCase());return b};r.spotlight={};r.spotlight.init=function(){var a=
$(".organic-listing");if(a.length){$(".organic-listing .arrow.prev").on("click",$.proxy(this,"prev"));$(".organic-listing .arrow.next").on("click",$.proxy(this,"next"));var b,c=r.analytics.breadcrumbs.lastClickFullname(),e=$(c?".id-"+c:null);e.length&&a.has(e).length?(r.debug("restoring spotlight selection to last click"),b={fullname:c}):b=this.chooseRandom();this.lineup=_.chain(this.lineup).reject(function(a){return _.isEqual(b,a)}).shuffle().unshift(b).value();this.lineup.pos=0;r.spotlight._advance(0)}};
r.spotlight.setup=function(a,b,c,e){this.organics=[];this.lineup=[];_.each(a,function(a){this.organics.push(a);this.lineup.push({fullname:a})},this);b&&this.lineup.push(".interestbar");this.interest_prob=b;this.show_promo=c;this.srnames=e;this.init()};r.spotlight.requestPromo=function(){return $.ajax({type:"POST",url:"/api/request_promo",timeout:1E3,data:{srnames:this.srnames,r:r.config.post_site}}).pipe(function(a){return a?($item=$(a),$item.hide().appendTo($(".organic-listing")),$item):!1})};r.spotlight.chooseRandom=
function(){$(".organic-listing");return this.show_promo?this.requestPromo():Math.random()<this.interest_prob?".interestbar":{fullname:this.organics[Math.floor(Math.random()*this.organics.length)]}};r.spotlight._materialize=function(a){if(!a||a instanceof $||a.promise)return a;var b=$(".organic-listing"),c;c=_.isString(a)?a:a.campaign?'[data-cid="'+a.campaign+'"]':'[data-fullname="'+a.fullname+'"]';b=b.find(c);if(b.length)return b;else r.error("unable to locate spotlight item",c,a)};r.spotlight._advancePos=
function(a){return(this.lineup.pos+a+this.lineup.length)%this.lineup.length};r.spotlight._materializePos=function(a){return this.lineup[a]=this._materialize(this.lineup[a])};r.spotlight._advance=function(a){var b=$(".organic-listing"),c=b.find(".nextprev"),e=b.find(".thing:visible"),i=this._advancePos(a),j=this._materializePos(i),g=setTimeout(function(){c.toggleClass("working",j.state&&j.state()=="pending")},200);this.lineup.pos=i;var k=$.when(j);k.always(_.bind(function(j){clearTimeout(g);this.lineup.pos==
i&&(k.isRejected()||!j?this.lineup.length>1?this._advance(a||1):b.hide():(c.removeClass("working"),b.removeClass("loading"),b.css("background-color",j.css("background-color")),e.hide(),j.show(),this.help(j),this.lineup.pos!=0&&(this._materializePos(this._advancePos(1)),this._materializePos(this._advancePos(-1)))))},this))};r.spotlight.next=$.proxy(r.spotlight,"_advance",1);r.spotlight.prev=$.proxy(r.spotlight,"_advance",-1);r.spotlight.help=function(a){var b=$("#spotlight-help");b.length&&$(function(){b.data("HelpBubble").hide(function(){b.find(".help-section").hide();
a.hasClass("promoted")?b.find(".help-promoted").show():a.hasClass("interestbar")?b.find(".help-interestbar").show():b.find(".help-organic").show()})})};r.adzerk={origin:location.protocol=="https:"?"https://az.turbobytes.net":"http://static.adzerk.net",createSponsorshipAdFrame:function(){var a=$("<iframe>").attr({id:"ad_sponsorship",src:r.adzerk.origin+"/reddit/ads-load.html?bust2",frameBorder:0,scrolling:"no"});$(".side .sponsorshipbox").empty().append(a)}};$(window).on("message",function(a){a=a.originalEvent;
a.origin==r.adzerk.origin&&(msg=a.data.split(":"),msg[0]=="ados.createAdFrame"&&r.adzerk.createSponsorshipAdFrame())})}catch(err$$6){r.sendError("Error running module","reddit-init.js",":",err$$6)};
r.i18n.setPluralForms('(n != 1)');r.i18n.addMessages({})
